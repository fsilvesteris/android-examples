<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="theme.css">
    <script type="text/javascript"
            src="http://maps.googleapis.com/maps/api/js?&sensor=true"></script>
    <script type="text/javascript">
var map;  function initialize() 
{

window.android.showToast("inside");
var latitude = 51.48;  
var longitude = 0;
var zoomLevel = 14;

if (window.android){      
    latitude = window.android.getLatitude();      
    longitude = window.android.getLongitude();
    zoomLevel = window.android.getZoomLevel();
    }

var myLatLng = new google.maps.LatLng(latitude,longitude);    
var myOptions = {zoom: zoomLevel, center: myLatLng, mapTypeId: google.maps.MapTypeId.ROADMAP}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);


/*
for additional events, refer to
https://developers.google.com/maps/documentation/javascript/examples/event-simple
https://developers.google.com/maps/documentation/javascript/reference?csw=1#event
*/

 google.maps.event.addListener(map, 'click',
 function(e)
  {
      var latLng=e.latLng;
      callMapEvent('click', latLng.lat(), latLng.lng(), map.getZoom());
  });


 google.maps.event.addListener(map, 'center_changed',
 function()
  {
  var latLng=map.getCenter()
  callMapEvent('center_changed', latLng.lat(), latLng.lng(), map.getZoom());
  });

 google.maps.event.addListener(map, 'zoom_changed',
 function()
 {
  var latLng=map.getCenter()
  callMapEvent('zoom_changed', latLng.lat(), latLng.lng(), map.getZoom());
  });
}

function callMapEvent(event, latitude, longitude, zoom)
{
if (window.android){
  window.android.mapEvent(event, latitude, longitude, zoom);
}

}



/*
redundant code
function centerAt(latitude, longitude){ myLatlng = new google.maps.LatLng(latitude,longitude); map.panTo(myLatLng); }
*/

    </script>
    <title>Location Toaster</title>
</head>
<body>
<body>
<div id="map_canvas" style="height: 700px;"></div>
<script type="text/javascript">initialize();</script>
</body>
</body>

</html>

